language: go
go:
- 1.6.1
env:
  global:
  - GIT_COMMITTER_NAME="Matsutanbot@Travis"
  - GIT_COMMITTER_EMAIL="matsuyuki.eca@gmail.com"
  - GIT_AUTHOR_NAME="Matsutanbot@Travis"
  - GIT_AUTHOR_EMAIL="matsuyuki.eca@gmail.com"
  - secure: cFDxSqkfJN6sGW+v2bQW8QXTUT96RvLZhgg1vvXG33oUo+6acpZNDl/sMXWjJaAwiONnZvXLzVPXcFHkHkk5YKzR+9ZExrChUemwe57e0e11HvBSeMZEiDZuWf5TzXnjAptUM44D2NmGeUIN79jmq01Hol6oIRYO1gxe0FsN1t7h4Szt9g+/gctxm2OCZq+Rlm02XsNISBDFTQbFlZarUU1rBQEps2tbtxX06YBAf5w0uhmkM2jYKp+y9qcgwoU1uix8pHQqx4s24Ny2CJJRowakiNrdEnfPBs/xrECyWuIfxRal4gfayJfLoq6ucyZJNQakbqj2Wp6ycnjK8uggumN5QE2Z4UNWjz52YtM4nzSIuWQJi3I1O6wXCYeJk27Ml2Biy+YzuaatWLTo0ozbigV36M+MG3gI4jNR6pooNdqj8dXSjmZ8nqyJTWAPYUQ4xjx6zEzCcVPtOPMyU9dkdo2R/5/s/Znvol80fAUVD/vm2bHteX0tTX4oo3NI35qWwGXy6YjJMv0x5WE6zLj9FF8ALhZhepwN0ejScYkIVKOzp/fdvN1WBFLI5v05Dh7aD9EOdZriFlzvytMBj9Qryt6aHPPWxYH+vCrA+R3o0Uh5TMGRCT/LvaVVRgM/54a/S7fNvk28CnB2zn86RbtWZ/os/0U7mEc1Fxd/Kp1256k=
install: sudo apt-get install hugo
script:
- git checkout -b gh-pages
- git rm -rf hugo/public
- git commit -m "temporal remove public"
- '[ $GH_TOKEN ] && git subtree add --prefix=hugo/public https://$GH_TOKEN@github.com/matsuyuki-a/rmn-web.net.git
  gh-pages --squash >& /dev/null'
- cd hugo
- echo -e "\033[0;32mDeploying updates to GitHub...\033[0m"
- hugo -t hugo-multi-bootswatch
- cd public
- git add -A
- msg="rebuilding site `date`"
- git commit -m "$msg" || echo "(nothing to commit)"
- cd ../..
- '[ $GH_TOKEN ] && git subtree push --prefix=hugo/public https://$GH_TOKEN@github.com/matsuyuki-a/rmn-web.net.git
  gh-pages >& /dev/null'
after_success:
- echo "OK"
notifications:
  slack:
    secure: q/rTirB3DGXQLMkjIrTqTkzJGjcb3m+QWoSPAC3uupRnJ5Vfh/aBM/nWVpPrXKnTMJMNXlWgth7oBt57u4tBtbpbaB8VBLAUVzH7AjHMYpC+zxePSrSq6bWcJq52xtPA22BqQIWkTV4PdhxoW8CsSBs4++T3+0lZsr02Q24vJBpvSVTwLPFSRdfWBoT9yt2bOIvw85PRBiWWXnutYvFnC/4RNfCa9PffOuecS6b1ElxPHEKfRV1SL/7m7rgEjw0OGZQnhb1hhDelbcrzH9Alj4GAcGjRZscINxUhstBQOOON37MFOBFKQBNvkE9XHjH/3Bmp0rpJHBjGdZiCXUo437CkxGIw+X7t2Tepp0aYnQ5+NKTlcXkgQk97qhvK5lC9C0g4Co++ui6hw1GZcXYyYovmZEX43XgWkoTCfA4eO1t/fURVF+4H37SKEXDyz45gMMlQRI4fAYIvI5U+QbTeGjq+x2ZlLsdgirl6wFCLIFyXT/gPUoON0/jjtHcxWaCV/gxPX0wuqNtKxDl3AhTq+gHxchjXEmUQ88kQiiKUovYjj4FQhUPEEPr+uMvnDbPFjtI/8klCeVmUnQvJcmCODr6wY6emNY/uVagFn2b4GGZ6GgYrq6OMvVeQjuxFB7HtXUy6SFnW41hTtdzdusPddnvLFnU28viK6ppwHrvFP68=
